(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{515:function(e,t,n){var s={"./af":347,"./af.js":347,"./ar":348,"./ar-dz":349,"./ar-dz.js":349,"./ar-kw":350,"./ar-kw.js":350,"./ar-ly":351,"./ar-ly.js":351,"./ar-ma":352,"./ar-ma.js":352,"./ar-sa":353,"./ar-sa.js":353,"./ar-tn":354,"./ar-tn.js":354,"./ar.js":348,"./az":355,"./az.js":355,"./be":356,"./be.js":356,"./bg":357,"./bg.js":357,"./bm":358,"./bm.js":358,"./bn":359,"./bn-bd":360,"./bn-bd.js":360,"./bn.js":359,"./bo":361,"./bo.js":361,"./br":362,"./br.js":362,"./bs":363,"./bs.js":363,"./ca":364,"./ca.js":364,"./cs":365,"./cs.js":365,"./cv":366,"./cv.js":366,"./cy":367,"./cy.js":367,"./da":368,"./da.js":368,"./de":369,"./de-at":370,"./de-at.js":370,"./de-ch":371,"./de-ch.js":371,"./de.js":369,"./dv":372,"./dv.js":372,"./el":373,"./el.js":373,"./en-au":374,"./en-au.js":374,"./en-ca":375,"./en-ca.js":375,"./en-gb":376,"./en-gb.js":376,"./en-ie":377,"./en-ie.js":377,"./en-il":378,"./en-il.js":378,"./en-in":379,"./en-in.js":379,"./en-nz":380,"./en-nz.js":380,"./en-sg":381,"./en-sg.js":381,"./eo":382,"./eo.js":382,"./es":383,"./es-do":384,"./es-do.js":384,"./es-mx":385,"./es-mx.js":385,"./es-us":386,"./es-us.js":386,"./es.js":383,"./et":387,"./et.js":387,"./eu":388,"./eu.js":388,"./fa":389,"./fa.js":389,"./fi":390,"./fi.js":390,"./fil":391,"./fil.js":391,"./fo":392,"./fo.js":392,"./fr":393,"./fr-ca":394,"./fr-ca.js":394,"./fr-ch":395,"./fr-ch.js":395,"./fr.js":393,"./fy":396,"./fy.js":396,"./ga":397,"./ga.js":397,"./gd":398,"./gd.js":398,"./gl":399,"./gl.js":399,"./gom-deva":400,"./gom-deva.js":400,"./gom-latn":401,"./gom-latn.js":401,"./gu":402,"./gu.js":402,"./he":403,"./he.js":403,"./hi":404,"./hi.js":404,"./hr":405,"./hr.js":405,"./hu":406,"./hu.js":406,"./hy-am":407,"./hy-am.js":407,"./id":408,"./id.js":408,"./is":409,"./is.js":409,"./it":410,"./it-ch":411,"./it-ch.js":411,"./it.js":410,"./ja":412,"./ja.js":412,"./jv":413,"./jv.js":413,"./ka":414,"./ka.js":414,"./kk":415,"./kk.js":415,"./km":416,"./km.js":416,"./kn":417,"./kn.js":417,"./ko":418,"./ko.js":418,"./ku":419,"./ku.js":419,"./ky":420,"./ky.js":420,"./lb":421,"./lb.js":421,"./lo":422,"./lo.js":422,"./lt":423,"./lt.js":423,"./lv":424,"./lv.js":424,"./me":425,"./me.js":425,"./mi":426,"./mi.js":426,"./mk":427,"./mk.js":427,"./ml":428,"./ml.js":428,"./mn":429,"./mn.js":429,"./mr":430,"./mr.js":430,"./ms":431,"./ms-my":432,"./ms-my.js":432,"./ms.js":431,"./mt":433,"./mt.js":433,"./my":434,"./my.js":434,"./nb":435,"./nb.js":435,"./ne":436,"./ne.js":436,"./nl":437,"./nl-be":438,"./nl-be.js":438,"./nl.js":437,"./nn":439,"./nn.js":439,"./oc-lnc":440,"./oc-lnc.js":440,"./pa-in":441,"./pa-in.js":441,"./pl":442,"./pl.js":442,"./pt":443,"./pt-br":444,"./pt-br.js":444,"./pt.js":443,"./ro":445,"./ro.js":445,"./ru":446,"./ru.js":446,"./sd":447,"./sd.js":447,"./se":448,"./se.js":448,"./si":449,"./si.js":449,"./sk":450,"./sk.js":450,"./sl":451,"./sl.js":451,"./sq":452,"./sq.js":452,"./sr":453,"./sr-cyrl":454,"./sr-cyrl.js":454,"./sr.js":453,"./ss":455,"./ss.js":455,"./sv":456,"./sv.js":456,"./sw":457,"./sw.js":457,"./ta":458,"./ta.js":458,"./te":459,"./te.js":459,"./tet":460,"./tet.js":460,"./tg":461,"./tg.js":461,"./th":462,"./th.js":462,"./tk":463,"./tk.js":463,"./tl-ph":464,"./tl-ph.js":464,"./tlh":465,"./tlh.js":465,"./tr":466,"./tr.js":466,"./tzl":467,"./tzl.js":467,"./tzm":468,"./tzm-latn":469,"./tzm-latn.js":469,"./tzm.js":468,"./ug-cn":470,"./ug-cn.js":470,"./uk":471,"./uk.js":471,"./ur":472,"./ur.js":472,"./uz":473,"./uz-latn":474,"./uz-latn.js":474,"./uz.js":473,"./vi":475,"./vi.js":475,"./x-pseudo":476,"./x-pseudo.js":476,"./yo":477,"./yo.js":477,"./zh-cn":478,"./zh-cn.js":478,"./zh-hk":479,"./zh-hk.js":479,"./zh-mo":480,"./zh-mo.js":480,"./zh-tw":481,"./zh-tw.js":481};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=515},518:function(e,t,n){},582:function(e,t,n){"use strict";n(518)},640:function(e,t,n){"use strict";n.r(t);var s=n(59),r=(n(81),n(10),n(12),n(14),n(580),n(517),n(513),n(346),n(207),n(342),n(49),n(343),n(83),n(344),n(109),n(487)),a=n.n(r),i=n(514);i.locale("fa-IR");var u={name:"p2pContact",mounted:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=e.$gun.user().recall({sessionStorage:!0});case 1:case"end":return t.stop()}}),t)})))()},computed:{orderBydate:function(){return a.a.orderBy(this.voiceList,"date",["desc"])}},data:function(){return{voiceList:[],loggedIN:!1,recording:!1,recorder:null,user:null,counter:3,file:null,items:[],playingItem:null,currentTime:null,owner_pub:"5nkDFG7Tkj-rAiMBz1ls5vUV9buM_R-E71zm0WPoeiw.uiPPbqeM5q9ZLwIxnTgflWOH3WoJgHQ0Rd_e3D013c4"}},methods:{getME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4",t.next=3,e.$gun.user("Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4");case 3:return n=t.sent,r=e.$gun.user(),t.next=7,e.$gun.user().get("voice-mail").once((function(e,t){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.t0=SEA,t.t1=e,t.next=5,SEA.secret(n.epub,r._.sea);case 5:return t.t2=t.sent,t.next=8,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 8:s=t.sent,console.log(s);case 10:case"end":return t.stop()}}),t)})))()}));case 7:case"end":return t.stop()}}),t)})))()},sendME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),s=n._.sea,t.next=4,e.$gun.user(e.owner_pub);case 4:return r=t.sent,a=r.epub,t.t0=SEA,t.next=9,SEA.secret(a,s);case 9:return t.t1=t.sent,t.next=12,t.t0.encrypt.call(t.t0,"shared data",t.t1);case 12:return i=t.sent,t.next=15,e.$gun.get("global-config").get("inbox").get("cert").then();case 15:return u=t.sent,t.next=18,e.$gun.get("~"+e.owner_pub).get("inbox").get(s.epub).set(i,console.log,{opt:{cert:u}});case 18:case"end":return t.stop()}}),t)})))()},adminLoad:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),t.next=3,SEA.certify("*",{"*":"voice-mail",".":"*"},n._.sea);case 3:return s=t.sent,t.next=6,e.$gun.get("global-config").get("voice-mail").get("cert").put(s);case 6:case"end":return t.stop()}}),t)})))()},loadVoices:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE",t.next=3,e.$gun.user("an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE");case 3:return n=t.sent,r=e.$gun.user(),a=e,t.next=8,e.user.get("voice-mail-test1").map().once((function(e){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SEA,t.t1=e,t.next=4,SEA.secret(n.epub,r._.sea);case 4:return t.t2=t.sent,t.next=7,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 7:(s=t.sent)&&s.date&&s.data&&a.voiceList.push(s);case 9:case"end":return t.stop()}}),t)})))()}));case 8:case"end":return t.stop()}}),t)})))()},playVoice:function(e){var t=this;return Object(s.a)(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(s=document.querySelector(".voice_"+e+" audio")).paused?(t.playingItem=e,s.play()):(t.playingItem=null,s.pause());case 2:case"end":return n.stop()}}),n)})))()},startRecording:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$gun.get("global-config").get("voice-mail").get("cert").then();case 2:return n=t.sent,r=e.$gun.user(),a=r._.sea,t.next=7,e.$gun.user(e.owner_pub);case 7:i=t.sent,u=i.epub,e.file=null,e.recording=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.items=[],e.recorder=new MediaRecorder(t),window.localStream=t,e.recorder.ondataavailable=function(t){e.items.push(t.data)},e.recorder.onstop=function(t){var r=new Blob(e.items,{type:"audio/ogg; codecs=opus"});e.file=URL.createObjectURL(r);var i=e;e.blobToBase64(r).then((function(t){Object(s.a)(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=SEA,s.t1={data:t,date:Date.now()},s.next=4,SEA.secret(u,a);case 4:return s.t2=s.sent,s.next=7,s.t0.encrypt.call(s.t0,s.t1,s.t2);case 7:return r=s.sent,s.next=10,e.$gun.get("~"+e.owner_pub).get("voice-mail").get(a.epub).set(r,(function(e){e.ok&&(console.log("پیام صوتی شما ارسال شد."),i.userAllert="پیام صوتی شما ارسال شد.")}),{opt:{cert:n}});case 10:case"end":return s.stop()}}),s)})))()}))},e.recorder.start()}));case 13:case"end":return t.stop()}}),t)})))()},stopRecording:function(){this.counter=3,this.recording=!1,this.recorder.stop(),window.localStream.getTracks()[0].stop()},countDownTimer:function(){var e=this;this.counter>0&&setTimeout((function(){e.counter-=1,e.countDownTimer()}),1e3),0===this.counter&&this.startRecording()},blobToBase64:function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},persian_number:function(e){var t=e.toString(),n="۰۱۲۳۴۵۶۷۸۹".split(""),s=t.replace(/\d/g,(function(e){return n[parseInt(e)]}));return s},persian_date:function(e){return i(e).fromNow()}}},o=(n(582),n(19)),c=Object(o.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",class:{"uk-button-primary":!e.recording,"uk-button-danger":e.recording},on:{mousedown:e.countDownTimer,mouseup:e.stopRecording}},[e._v("\n      "+e._s(e.recording?"در حال ضبط صدا...":"برای ضبط صدا "+this.persian_number(this.counter)+"  ثانیه نگه دارید .")+"\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.adminLoad}},[e._v("\n      admin Load\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.sendME}},[e._v("\n      Send ME\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.getME}},[e._v("\n      get ME\n    ")])]),e._v(" "),n("p",{staticClass:"uk-text-meta"},[e._v("\n    برای تماس مستقیم با من می توانید پیام صوتی بگذارید.\n  ")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"uk-margin-small-top uk-timeline"},e._l(e.orderBydate,(function(t){return n("div",{key:t.date,staticClass:"uk-timeline-item",class:"voice_"+t.date,attrs:{tabindex:"-1"}},[n("div",{staticClass:"uk-timeline-content"},[n("div",{staticClass:"\n            uk-card\n            uk-card-small\n            uk-card-default\n            uk-margin-small-bottom\n            uk-overflow-auto\n          "},[n("div",{staticClass:"uk-card-header uk-background-muted"},[n("div",{staticClass:"uk-grid-small uk-flex-middle",attrs:{"uk-grid":""}},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n                "+e._s(e.persian_number(e.persian_date(t.date)))+"\n              ")]),e._v(" "),n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v(" محمد ابراهیمی ")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-success uk-margin-auto-right"},[e._v("درخواست مشاوره")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("جدید")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("پاسخ دادن")])])]),e._v(" "),n("div",{staticClass:"uk-card-body uk-padding-small"},[t.data?n("av-waveform",{staticClass:"uk-width-1-1",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1),e._v(" "),n("div",{staticClass:"uk-card-footer"},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n              "+e._s(e.persian_number(e.persian_date(t.date)))+" پاسخ داده شد.\n            ")]),e._v(" "),n("span",{staticClass:"\n                uk-label\n                uk-label-alert\n                uk-margin-small-right\n                uk-padding-small-top\n              ",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()]),e._v(" "),t.data?n("av-waveform",{staticClass:"uk-padding-small uk-margin-small-top",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1)])]),e._v(" "),n("div",{staticClass:"uk-timeline-icon"},[n("span",{staticClass:"uk-badge",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()])])])})),0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-margin"},[t("select",{staticClass:"uk-select"},[t("option",[this._v("سفارش کار")]),this._v(" "),t("option",[this._v("درخواست مشاوره")]),this._v(" "),t("option",[this._v("عمومی")])])])}],!1,null,"118593b2",null);t.default=c.exports}}]);