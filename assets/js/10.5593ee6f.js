(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{543:function(e,t,n){var s={"./af":369,"./af.js":369,"./ar":370,"./ar-dz":371,"./ar-dz.js":371,"./ar-kw":372,"./ar-kw.js":372,"./ar-ly":373,"./ar-ly.js":373,"./ar-ma":374,"./ar-ma.js":374,"./ar-sa":375,"./ar-sa.js":375,"./ar-tn":376,"./ar-tn.js":376,"./ar.js":370,"./az":377,"./az.js":377,"./be":378,"./be.js":378,"./bg":379,"./bg.js":379,"./bm":380,"./bm.js":380,"./bn":381,"./bn-bd":382,"./bn-bd.js":382,"./bn.js":381,"./bo":383,"./bo.js":383,"./br":384,"./br.js":384,"./bs":385,"./bs.js":385,"./ca":386,"./ca.js":386,"./cs":387,"./cs.js":387,"./cv":388,"./cv.js":388,"./cy":389,"./cy.js":389,"./da":390,"./da.js":390,"./de":391,"./de-at":392,"./de-at.js":392,"./de-ch":393,"./de-ch.js":393,"./de.js":391,"./dv":394,"./dv.js":394,"./el":395,"./el.js":395,"./en-au":396,"./en-au.js":396,"./en-ca":397,"./en-ca.js":397,"./en-gb":398,"./en-gb.js":398,"./en-ie":399,"./en-ie.js":399,"./en-il":400,"./en-il.js":400,"./en-in":401,"./en-in.js":401,"./en-nz":402,"./en-nz.js":402,"./en-sg":403,"./en-sg.js":403,"./eo":404,"./eo.js":404,"./es":405,"./es-do":406,"./es-do.js":406,"./es-mx":407,"./es-mx.js":407,"./es-us":408,"./es-us.js":408,"./es.js":405,"./et":409,"./et.js":409,"./eu":410,"./eu.js":410,"./fa":411,"./fa.js":411,"./fi":412,"./fi.js":412,"./fil":413,"./fil.js":413,"./fo":414,"./fo.js":414,"./fr":415,"./fr-ca":416,"./fr-ca.js":416,"./fr-ch":417,"./fr-ch.js":417,"./fr.js":415,"./fy":418,"./fy.js":418,"./ga":419,"./ga.js":419,"./gd":420,"./gd.js":420,"./gl":421,"./gl.js":421,"./gom-deva":422,"./gom-deva.js":422,"./gom-latn":423,"./gom-latn.js":423,"./gu":424,"./gu.js":424,"./he":425,"./he.js":425,"./hi":426,"./hi.js":426,"./hr":427,"./hr.js":427,"./hu":428,"./hu.js":428,"./hy-am":429,"./hy-am.js":429,"./id":430,"./id.js":430,"./is":431,"./is.js":431,"./it":432,"./it-ch":433,"./it-ch.js":433,"./it.js":432,"./ja":434,"./ja.js":434,"./jv":435,"./jv.js":435,"./ka":436,"./ka.js":436,"./kk":437,"./kk.js":437,"./km":438,"./km.js":438,"./kn":439,"./kn.js":439,"./ko":440,"./ko.js":440,"./ku":441,"./ku.js":441,"./ky":442,"./ky.js":442,"./lb":443,"./lb.js":443,"./lo":444,"./lo.js":444,"./lt":445,"./lt.js":445,"./lv":446,"./lv.js":446,"./me":447,"./me.js":447,"./mi":448,"./mi.js":448,"./mk":449,"./mk.js":449,"./ml":450,"./ml.js":450,"./mn":451,"./mn.js":451,"./mr":452,"./mr.js":452,"./ms":453,"./ms-my":454,"./ms-my.js":454,"./ms.js":453,"./mt":455,"./mt.js":455,"./my":456,"./my.js":456,"./nb":457,"./nb.js":457,"./ne":458,"./ne.js":458,"./nl":459,"./nl-be":460,"./nl-be.js":460,"./nl.js":459,"./nn":461,"./nn.js":461,"./oc-lnc":462,"./oc-lnc.js":462,"./pa-in":463,"./pa-in.js":463,"./pl":464,"./pl.js":464,"./pt":465,"./pt-br":466,"./pt-br.js":466,"./pt.js":465,"./ro":467,"./ro.js":467,"./ru":468,"./ru.js":468,"./sd":469,"./sd.js":469,"./se":470,"./se.js":470,"./si":471,"./si.js":471,"./sk":472,"./sk.js":472,"./sl":473,"./sl.js":473,"./sq":474,"./sq.js":474,"./sr":475,"./sr-cyrl":476,"./sr-cyrl.js":476,"./sr.js":475,"./ss":477,"./ss.js":477,"./sv":478,"./sv.js":478,"./sw":479,"./sw.js":479,"./ta":480,"./ta.js":480,"./te":481,"./te.js":481,"./tet":482,"./tet.js":482,"./tg":483,"./tg.js":483,"./th":484,"./th.js":484,"./tk":485,"./tk.js":485,"./tl-ph":486,"./tl-ph.js":486,"./tlh":487,"./tlh.js":487,"./tr":488,"./tr.js":488,"./tzl":489,"./tzl.js":489,"./tzm":490,"./tzm-latn":491,"./tzm-latn.js":491,"./tzm.js":490,"./ug-cn":492,"./ug-cn.js":492,"./uk":493,"./uk.js":493,"./ur":494,"./ur.js":494,"./uz":495,"./uz-latn":496,"./uz-latn.js":496,"./uz.js":495,"./vi":497,"./vi.js":497,"./x-pseudo":498,"./x-pseudo.js":498,"./yo":499,"./yo.js":499,"./zh-cn":500,"./zh-cn.js":500,"./zh-hk":501,"./zh-hk.js":501,"./zh-mo":502,"./zh-mo.js":502,"./zh-tw":503,"./zh-tw.js":503};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=a,e.exports=r,r.id=543},544:function(e,t,n){},608:function(e,t,n){"use strict";n(544)},666:function(e,t,n){"use strict";n.r(t);var s=n(67),r=(n(89),n(7),n(17),n(21),n(533),n(507),n(541),n(368),n(221),n(31),n(364),n(37),n(365),n(90),n(366),n(120),n(511)),a=n.n(r),i=n(542);i.locale("fa-IR");var u={name:"p2pContact",mounted:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=e.$gun.user().recall({sessionStorage:!0});case 1:case"end":return t.stop()}}),t)})))()},computed:{orderBydate:function(){return a.a.orderBy(this.voiceList,"date",["desc"])}},data:function(){return{voiceList:[],loggedIN:!1,recording:!1,recorder:null,user:null,counter:3,file:null,items:[],playingItem:null,currentTime:null,owner_pub:"5nkDFG7Tkj-rAiMBz1ls5vUV9buM_R-E71zm0WPoeiw.uiPPbqeM5q9ZLwIxnTgflWOH3WoJgHQ0Rd_e3D013c4"}},methods:{getME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4",t.next=3,e.$gun.user("Wy_J4WC966IkwXeu6sZv4Nc2Y5dPQB7acKVW4sA9HXE.hdkqURPAys78Zq94I_016BYfB8XXSqwRmoXyK3h4gv4");case 3:return n=t.sent,r=e.$gun.user(),t.next=7,e.$gun.user().get("voice-mail").once((function(e,t){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.t0=SEA,t.t1=e,t.next=5,SEA.secret(n.epub,r._.sea);case 5:return t.t2=t.sent,t.next=8,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 8:s=t.sent,console.log(s);case 10:case"end":return t.stop()}}),t)})))()}));case 7:case"end":return t.stop()}}),t)})))()},sendME:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),s=n._.sea,t.next=4,e.$gun.user(e.owner_pub);case 4:return r=t.sent,a=r.epub,t.t0=SEA,t.next=9,SEA.secret(a,s);case 9:return t.t1=t.sent,t.next=12,t.t0.encrypt.call(t.t0,"shared data",t.t1);case 12:return i=t.sent,t.next=15,e.$gun.get("global-config").get("inbox").get("cert").then();case 15:return u=t.sent,t.next=18,e.$gun.get("~"+e.owner_pub).get("inbox").get(s.epub).set(i,console.log,{opt:{cert:u}});case 18:case"end":return t.stop()}}),t)})))()},adminLoad:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$gun.user(),t.next=3,SEA.certify("*",{"*":"voice-mail",".":"*"},n._.sea);case 3:return s=t.sent,t.next=6,e.$gun.get("global-config").get("voice-mail").get("cert").put(s);case 6:case"end":return t.stop()}}),t)})))()},loadVoices:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE",t.next=3,e.$gun.user("an1fr61SYFeEpFnwbHHpN-Xdos8qBXSv5rUQOQ6H3z4.phpIpA6RNEflE3s35Oiiqmu9QBOObAxVygby4ChDjLE");case 3:return n=t.sent,r=e.$gun.user(),a=e,t.next=8,e.user.get("voice-mail-test1").map().once((function(e){Object(s.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SEA,t.t1=e,t.next=4,SEA.secret(n.epub,r._.sea);case 4:return t.t2=t.sent,t.next=7,t.t0.decrypt.call(t.t0,t.t1,t.t2);case 7:(s=t.sent)&&s.date&&s.data&&a.voiceList.push(s);case 9:case"end":return t.stop()}}),t)})))()}));case 8:case"end":return t.stop()}}),t)})))()},playVoice:function(e){var t=this;return Object(s.a)(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(s=document.querySelector(".voice_"+e+" audio")).paused?(t.playingItem=e,s.play()):(t.playingItem=null,s.pause());case 2:case"end":return n.stop()}}),n)})))()},startRecording:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,a,i,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$gun.get("global-config").get("voice-mail").get("cert").then();case 2:return n=t.sent,r=e.$gun.user(),a=r._.sea,t.next=7,e.$gun.user(e.owner_pub);case 7:i=t.sent,u=i.epub,e.file=null,e.recording=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.items=[],e.recorder=new MediaRecorder(t),window.localStream=t,e.recorder.ondataavailable=function(t){e.items.push(t.data)},e.recorder.onstop=function(t){var r=new Blob(e.items,{type:"audio/ogg; codecs=opus"});e.file=URL.createObjectURL(r);var i=e;e.blobToBase64(r).then((function(t){Object(s.a)(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.t0=SEA,s.t1={data:t,date:Date.now()},s.next=4,SEA.secret(u,a);case 4:return s.t2=s.sent,s.next=7,s.t0.encrypt.call(s.t0,s.t1,s.t2);case 7:return r=s.sent,s.next=10,e.$gun.get("~"+e.owner_pub).get("voice-mail").get(a.epub).set(r,(function(e){e.ok&&(console.log("پیام صوتی شما ارسال شد."),i.userAllert="پیام صوتی شما ارسال شد.")}),{opt:{cert:n}});case 10:case"end":return s.stop()}}),s)})))()}))},e.recorder.start()}));case 13:case"end":return t.stop()}}),t)})))()},stopRecording:function(){this.counter=3,this.recording=!1,this.recorder.stop(),window.localStream.getTracks()[0].stop()},countDownTimer:function(){var e=this;this.counter>0&&setTimeout((function(){e.counter-=1,e.countDownTimer()}),1e3),0===this.counter&&this.startRecording()},blobToBase64:function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))},persian_number:function(e){var t=e.toString(),n="۰۱۲۳۴۵۶۷۸۹".split(""),s=t.replace(/\d/g,(function(e){return n[parseInt(e)]}));return s},persian_date:function(e){return i(e).fromNow()}}},o=(n(608),n(24)),c=Object(o.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",class:{"uk-button-primary":!e.recording,"uk-button-danger":e.recording},on:{mousedown:e.countDownTimer,mouseup:e.stopRecording}},[e._v("\n      "+e._s(e.recording?"در حال ضبط صدا...":"برای ضبط صدا "+this.persian_number(this.counter)+"  ثانیه نگه دارید .")+"\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.adminLoad}},[e._v("\n      admin Load\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.sendME}},[e._v("\n      Send ME\n    ")])]),e._v(" "),n("div",{staticClass:"uk-margin"},[n("button",{staticClass:"uk-button uk-button-default uk-width-1-1",on:{click:e.getME}},[e._v("\n      get ME\n    ")])]),e._v(" "),n("p",{staticClass:"uk-text-meta"},[e._v("\n    برای تماس مستقیم با من می توانید پیام صوتی بگذارید.\n  ")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"uk-margin-small-top uk-timeline"},e._l(e.orderBydate,(function(t){return n("div",{key:t.date,staticClass:"uk-timeline-item",class:"voice_"+t.date,attrs:{tabindex:"-1"}},[n("div",{staticClass:"uk-timeline-content"},[n("div",{staticClass:"\n            uk-card\n            uk-card-small\n            uk-card-default\n            uk-margin-small-bottom\n            uk-overflow-auto\n          "},[n("div",{staticClass:"uk-card-header uk-background-muted"},[n("div",{staticClass:"uk-grid-small uk-flex-middle",attrs:{"uk-grid":""}},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n                "+e._s(e.persian_number(e.persian_date(t.date)))+"\n              ")]),e._v(" "),n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v(" محمد ابراهیمی ")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-success uk-margin-auto-right"},[e._v("درخواست مشاوره")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("جدید")]),e._v(" "),n("span",{staticClass:"uk-label uk-label-alert uk-margin-small-right"},[e._v("پاسخ دادن")])])]),e._v(" "),n("div",{staticClass:"uk-card-body uk-padding-small"},[t.data?n("av-waveform",{staticClass:"uk-width-1-1",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1),e._v(" "),n("div",{staticClass:"uk-card-footer"},[n("span",{staticClass:"uk-card-title uk-text-meta"},[e._v("\n              "+e._s(e.persian_number(e.persian_date(t.date)))+" پاسخ داده شد.\n            ")]),e._v(" "),n("span",{staticClass:"\n                uk-label\n                uk-label-alert\n                uk-margin-small-right\n                uk-padding-small-top\n              ",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()]),e._v(" "),t.data?n("av-waveform",{staticClass:"uk-padding-small uk-margin-small-top",attrs:{"canv-width":500,"audio-controls":!1,"line-width":4,"noplayed-line-color":"#39f","playtime-line-width":5,"playtime-clickable":!0,"audio-src":t.data}}):e._e()],1)])]),e._v(" "),n("div",{staticClass:"uk-timeline-icon"},[n("span",{staticClass:"uk-badge",on:{click:function(n){return e.playVoice(t.date)}}},[e.playingItem!==t.date?n("span",{attrs:{"uk-icon":"play"}}):e._e(),e._v(" "),e.playingItem==t.date?n("span",{attrs:{"uk-icon":"close"}}):e._e()])])])})),0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uk-margin"},[t("select",{staticClass:"uk-select"},[t("option",[this._v("سفارش کار")]),this._v(" "),t("option",[this._v("درخواست مشاوره")]),this._v(" "),t("option",[this._v("عمومی")])])])}],!1,null,"118593b2",null);t.default=c.exports}}]);